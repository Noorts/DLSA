{
  "openapi": "3.1.0",
  "info": {
    "title": "FastAPI",
    "version": "0.1.0"
  },
  "paths": {
    "/job/format/internal": {
      "post": {
        "summary": "Submit Job",
        "operationId": "submit_job_job_format_internal_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/JobRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/JobId"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/job/{job_id}/status": {
      "get": {
        "summary": "Get Job",
        "operationId": "get_job_job__job_id__status_get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/JobStatus"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/job/{job_id}/result": {
      "get": {
        "summary": "Get Job",
        "operationId": "get_job_job__job_id__result_get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/JobResult"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/worker/register": {
      "post": {
        "summary": "Register Worker",
        "operationId": "register_worker_worker_register_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WorkerResources"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkerId"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/worker/pulse": {
      "post": {
        "summary": "Worker Pulse",
        "operationId": "worker_pulse_worker_pulse_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WorkerId"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/work/": {
      "post": {
        "summary": "Get Work",
        "operationId": "get_work_work__post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WorkerId"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/WorkPackage"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "title": "Response Get Work Work  Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/work/{work_id}/status": {
      "post": {
        "summary": "Update Work Status",
        "operationId": "update_work_status_work__work_id__status_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WorkStatus"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/work/{work_id}/result": {
      "post": {
        "summary": "Work Result",
        "operationId": "work_result_work__work_id__result_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WorkResult"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Alignment": {
        "properties": {
          "alignment": {
            "type": "string",
            "title": "Alignment"
          },
          "length": {
            "type": "integer",
            "title": "Length"
          },
          "score": {
            "type": "integer",
            "title": "Score"
          }
        },
        "type": "object",
        "required": [
          "alignment",
          "length",
          "score"
        ],
        "title": "Alignment"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "JobId": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          }
        },
        "type": "object",
        "required": [
          "id"
        ],
        "title": "JobId"
      },
      "JobRequest": {
        "properties": {
          "targets": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Targets"
          },
          "queries": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Queries"
          },
          "sequences": {
            "items": {
              "prefixItems": [
                {
                  "type": "string"
                },
                {
                  "type": "string"
                }
              ],
              "type": "array",
              "maxItems": 2,
              "minItems": 2
            },
            "type": "array",
            "title": "Sequences"
          }
        },
        "type": "object",
        "required": [
          "targets",
          "queries",
          "sequences"
        ],
        "title": "JobRequest"
      },
      "JobResult": {
        "properties": {
          "alignments": {
            "items": {
              "$ref": "#/components/schemas/Alignment"
            },
            "type": "array",
            "title": "Alignments"
          }
        },
        "type": "object",
        "required": [
          "alignments"
        ],
        "title": "JobResult"
      },
      "JobStatus": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "state": {
            "type": "string",
            "enum": [
              "IN_QUEUE",
              "IN_PROGRESS",
              "DONE"
            ],
            "title": "State"
          },
          "progress": {
            "type": "number",
            "title": "Progress"
          }
        },
        "type": "object",
        "required": [
          "id",
          "state",
          "progress"
        ],
        "title": "JobStatus"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "WorkPackage": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "targets": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Targets"
          },
          "queries": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Queries"
          },
          "sequences": {
            "items": {
              "prefixItems": [
                {
                  "type": "string"
                },
                {
                  "type": "string"
                }
              ],
              "type": "array",
              "maxItems": 2,
              "minItems": 2
            },
            "type": "array",
            "title": "Sequences"
          }
        },
        "type": "object",
        "required": [
          "id",
          "targets",
          "queries",
          "sequences"
        ],
        "title": "WorkPackage"
      },
      "WorkResult": {
        "properties": {
          "work_id": {
            "type": "string",
            "title": "Work Id"
          },
          "alignments": {
            "items": {
              "prefixItems": [
                {
                  "prefixItems": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "string"
                    }
                  ],
                  "type": "array",
                  "maxItems": 2,
                  "minItems": 2
                },
                {
                  "$ref": "#/components/schemas/Alignment"
                }
              ],
              "type": "array",
              "maxItems": 2,
              "minItems": 2
            },
            "type": "array",
            "title": "Alignments"
          }
        },
        "type": "object",
        "required": [
          "work_id",
          "alignments"
        ],
        "title": "WorkResult"
      },
      "WorkStatus": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "percentage_done": {
            "type": "number",
            "title": "Percentage Done"
          }
        },
        "type": "object",
        "required": [
          "id",
          "percentage_done"
        ],
        "title": "WorkStatus"
      },
      "WorkerId": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          }
        },
        "type": "object",
        "required": [
          "id"
        ],
        "title": "WorkerId"
      },
      "WorkerResources": {
        "properties": {
          "ram_mb": {
            "type": "integer",
            "title": "Ram Mb"
          },
          "cpu_resources": {
            "type": "integer",
            "title": "Cpu Resources"
          }
        },
        "type": "object",
        "required": [
          "ram_mb",
          "cpu_resources"
        ],
        "title": "WorkerResources"
      }
    }
  }
}